# Функциональное программирование: Пишем компилятор!

Цель этой лабораторной работы - придумать свой собственный функциональный язык программирования и разработать для него интерпретатор или компилятор.

* 3 человека - компилятор/интерпретатор + примеры программ + краткая документация в README.md (вы можете заменить этот файл своей собственной документацией)

## Задача

Цель этой лабораторной работы - придумать свой собственный функциональный язык программирования и разработать для него интерпретатор или компилятор.

## Реализованные функции языка:

* [+] Именованные переменные (`let`)
* [+] Рекурсия
* [+] Функции
* [+] Замыкания

## Авторы

Имя | Роль в проекте
------------------|---------------------
Спирин Тимофей | Парсер
Мальцев Григорий | Парсер, синтаксис
Савельев Константин | Парсер

## Документация

Разработанный язык программирования называется hayao, что, вероятно, является отсылкой на известного японского режиссера. Так получилось, поскольку изначально в язык планировалось добавить множество отсылок на аниме-культуру, но у авторов не хватило вдохновения, чтобы это реализовать. Возможности и особенности языка описываются ниже.

### 1. Типы значений.
В hayao реализованы различные типы значений. Для пользователя в первую очередь важны Int, Float и Void. Bool не предусмотрен.

### 2. Арифметические операции.
Для Int и Float определен ряд арифметических операций:
- "+" (сложение);
- "-" (вычитание);
- "*" (умножение);
- "/" (деление);
- "%" (взятие остатка);
- "**" (возведение в степень);
- "sqrt" (взятие квадратного корня),
А также логические операции 
- "||" (ИЛИ);
- "&&" (И);
- "=";
- ">=";
- "<=";
- "!=".
Результатом логической операции является число типа Int, равное 0 или 1.

Арифметические и логические выражения записываются в фигурных скобках:
```
{4 + 9}
```
Важно: арифметические и логические операции должны выделяться пробелами.

### 3. Функции.
Язык hayao основан на функциях. Чтобы определить функцию, используется ключевое слово let, далее должно идти имя функции и ее тело. Функция возвращает одно значение - результат выражения на последней отработанной в строке в функции. Для того, чтобы вызвать функцию, используется шаблон "$ИМЯ_ФУНКЦИИ [ПАРАМЕТРЫ_ЧЕРЕЗ_ПРОБЕЛ]". Из себя функция представляет именованное лямбда-выражение, объявляемое ключевым словом Lam, способное содержать в себе другие лямбда-выражения, вызовы функций, условные выражения и т.д. Одно лямбда выражение может иметь только один параметр, вызывающийся по шаблону "$ИМЯ_ПАРАМЕТРА".

Пример:
```
let foo Lam a Lam b {$a + $b}
foo [2 3] # 5
```

### 3.1. Рекурсивные функции
Функции также могут быть рекурсивными. Для этого при объявлении взамен let используется ключевое слово let_rec.

Пример:
```
let_rec fact 
    Lam x   
        if {$x <= 1}
        	{1}
	else   
        	{$x * $fact [{ $x - 1 }]} 
$fact [5] # 120
```

### 4. Переменные.
Переменные внешне похожи на функции. Для объявления переменной так же используется ключевое слово let, однако ключевое слово Lam не используется, вместо него сразу вписывается значение либо выражение. Вызов переменной аналогичен вызову функции, однако на месте аргументов в квадратных скобках не нужно ничего указывать.

Пример:
```
let f {2 + 3}
$f [] # 5
```

### 5. Условные выражения.
В hayao есть условная конструкция if then else. Ее использование тривиально.

Пример:
```
let my_foo Lam a
	if {$a = 0} then 1
	else
	if {$a = 1} then {$a + 1}
	else 0
$my_foo [2] # 0
```

### Оставшиеся замечания.
- Если с двух сторон выделить часть кода символом "#", она будет считаться комментарием и не будет восприниматься интерпретатором. В примерах комментарии выделяются решёткой только с одной стороны, что допустимо, но только если после комментария нет кода.
- Выделять или не выделять скобки (любые) пробелами - нет разницы, код будет работать в любом случае. Пробелы критичны лишь для арифметических и логических операций, а также для символа "$" при вызове функций, переменных, или параметров лямбда-выражений. Разумеется, ключевые слова также выделяются пробелами.
- Табуляция абсолютно не важна, код можно писать хоть в одну строчку.
- Поддерживается префиксная форма записи выражений. В случае ее использования фигурные скобки необязательны.
